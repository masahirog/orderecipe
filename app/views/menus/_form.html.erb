<%= form_for @menu do |f| %>
  <% if @menu.errors.any? %>
    <div id="error_explanation">
      <b><%= pluralize(@menu.errors.count, "箇所") %>入力に不備があります</b>
      <ul style="list-style:none;">
      <% @menu.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <nav class="alert alert-danger eos-alert navbar-fixed-top" style="display:none;">
      終売の食材を選択しています。食材を変更してください(((；ﾟДﾟ)))
  </nav>
  <div class="form-group col-md-6">
    <%= f.label :name ,'メニュー名' %><br>
    <%= f.text_field :name, class: "form-control", id: "material_name",style:"width:100%;" %>
  </div>
  <div class="form-group col-md-3">
    <%= f.label :category ,'カテゴリー' %><br>
    <%= f.select :category, [["主食：ご飯など", "主食"],[ "主菜：メインのおかず", "主菜"],
    [ "副菜：副菜、漬物など", "副菜"],[ "容器：お弁当箱と箸等", "容器"]],{include_blank: true}, { class: "form-control",style:"width:100%;"} %>
  </div>
  <div class="col-xs-12 col-md-3 form-inline">
    <div class="col-xs-1 form-group col-md-10">
      <%= f.label :cost_price, "メニュー原価" %></br>
      <%= f.number_field :cost_price, readonly: 'readonly',class: "menu_cost_price form-control",style:"width:100%" %>
    </div>
    <div class="col-xs-1 form-group col-md-1" style="margin-top:35px; padding:0;">
      円
    </div>
  </div>


  <div class="col-xs-12 col-md-6 form-group">
    <%= f.label :recipe ,'調理メモ' %><br>
    <%= f.text_area :recipe, style:"height:10em;width:100%;", class:"form-control" %>
  </div>
  <div class="col-xs-12 col-md-6 form-group">
    <%= f.label :serving_memo ,'盛付メモ' %><br>
    <%= f.text_area :serving_memo,style:"height:10em;width:100%;", class: "form-control" %>
  </div>


  <div class="material_area">
        <div class="col-md-12" style="margin:5px;">
          <label class="col-md-3">食材・資材名</label>
          <label class="col-md-1">原価</label>
          <label class="col-md-1">仕入先</label>
          <label class="col-md-2">使用量</label>
          <label class="col-md-1">使用価格</label>
          <label class="col-md-2">仕込み内容</label>
          <label class="col-md-1">持ち場</label>
          <label class="col-md-1"></label>
        </div>
    <ul class='material_ul list-group' style="list-style-type: none;">
    <%= f.fields_for :menu_materials do |m| %>
      <li class="add_li_material col-md-12 list-group-item" >
        <div class="select_material col-md-3" style="padding:3px;">
         <%= m.select :material_id, Material.pluck(:name, :id),{include_blank: true},
          class:'input_select_material col-md-12'%>
       </div>
       <div class="sales_check" style="display:none;">
       </div>
        <div class="cost_price col-md-1 form-inline">
          <div class="cost_price_value form-group"></div><div class="form-group">　円</div>
        </div>
        <div class="vendor col-md-1">
        </div>
        <div class="amount_used col-md-2 form-inline">
          <%= m.text_field :amount_used, class:'amount_used_input form-control form-group',style:"width:140px;" %>
          <div class="calculated_unit form-group">
          </div>
        </div>
        <div class="price_used form-inline col-md-1">
          <div class="price_used_value form-group"></div><div class="form-group">　円</div>
        </div>
        <div class="preparation col-md-2" style="padding:0;">
          <%= m.text_field :preparation, class:'preparation_input form-control',
            autocomplete:"on", list:"unit_list" %>
          <datalist id="unit_list">
            <option value="ボイル">
            <option value="カット">
            <option value="タレ">
            <option value="千切り">
            <option value="みじん切り">
            <option value="計量">
            <option value="こ">
            <option value="個">
            <option value="束">
            <option value="匹">
          </datalist>
        </div>
        <div class="select_post col-md-1">
          <%= m.select :post, [["調理場", "調理場"],[ "切り出し", "切り出し"],[ "切出/調理場", "切出/調理場"]],
          {include_blank: true}, { class: "form-control"} %>
        </div>
        <div class="remove_material col-md-1">
          <a class ="remove_btn btn btn-danger" >削除</a>
          <%= m.check_box :_destroy,class:"destroy_materials check_box form-control", style: "display:none;" %>
        </div>
      </li>
      <% end %>
    </ul>
  </div>
  <div class="col-md-12" style="margin-top:20px;">
    <input type="button" value="材料追加" class="add_material btn btn-primary">
  </div>

  <%= f.hidden_field :back_to, :value => @back_to %>

  <% if local_assigns[:locals][:edit_flag] == true %>
    <div class="action col-md-12" style="margin-bottom:20px;">
      <input type="button" value="更新する" class="btn btn-success" id="menu_submit_btn">
    </div>
  <% else %>
    <div class="action col-md-12" style="margin-bottom:20px;">
      <input type="button" onclick="submit();" value="登録する" class="btn btn-success">
    </div>
  <% end %>
<% end %>
